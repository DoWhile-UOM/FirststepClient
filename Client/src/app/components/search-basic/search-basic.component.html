<mat-card class="search-card mat-elevation-4z">
    <form class="container" #searchJobForm="ngForm" (ngSubmit)="search(searchJobForm.value)">
        <mat-form-field appearance="outline" class="search-element title">
            <mat-label>Job Title</mat-label>
            <mat-icon matPrefix color="primary">work</mat-icon>
            <input matInput placeholder="What do you looking for..." name="title" ngModel>
        </mat-form-field>

        <mat-form-field appearance="outline" class="search-element location">
            <mat-label>Country</mat-label>
            <mat-icon matPrefix color="primary">location_one</mat-icon>
            <input type="text"
                placeholder="Pick a Country"
                aria-label="Country"
                matInput #countryInput
                [formControl]="locationCountryControl"
                [matAutocomplete]="autocountry" (change)="validateSelectedCountry(countryInput.value)">
            <mat-autocomplete autoActiveFirstOption #autocountry="matAutocomplete" (optionSelected)="onSelectedCountryChanged($event.option.viewValue)">
            @for (option of locationCountryFilteredOptions | async; track option) {
                <mat-option [value]="option">{{option}}</mat-option>
            }
            </mat-autocomplete>
        </mat-form-field>
    
        <mat-form-field appearance="outline" class="search-element location">
            <mat-label>City</mat-label>
            <mat-icon matPrefix color="primary">location_city</mat-icon>
            <input type="text"
                placeholder="Pick a City"
                aria-label="City"
                matInput
                [formControl]="locationCityControl"
                [matAutocomplete]="autocity">
            <mat-autocomplete autoActiveFirstOption #autocity="matAutocomplete">
            @for (option of locationCityFilteredOptions | async; track option) {
                <mat-option [value]="option">{{option}}</mat-option>
            }
            </mat-autocomplete>
        </mat-form-field>
    
        <div class="searchBtn">
            <button mat-icon-button type="submit" color="primary">
                <mat-icon>search</mat-icon>
            </button> 
        </div>
        <div class="allFiltersBtn">
            <button mat-icon-button type="button" color="primary" (click)="showAllFilters()">
                <mat-icon>more_horiz</mat-icon>
            </button> 
        </div>
    </form>
</mat-card>
<app-spinner></app-spinner>